@{
    ViewBag.Title = "Create persons list";
}

<a href="~/persons/index"
   class="inline-block mb-4 text-blue-600 font-medium hover:underline">
    ← Back to Person List
</a>

<h2 class="text-3xl font-semibold mb-6 text-gray-800">
    Create Person
</h2>



 <!-- Error Messages -->
@if (ViewBag.errorMessages != null && ViewBag.errorMessages.Count > 0)
{
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        <ul class="list-disc pl-5">
            @foreach (string error in ViewBag.errorMessages)
            {
                <li>@error</li>
            }
        </ul>
    </div>
} 



<form action="~/persons/create" method="post"
      class="max-w-lg bg-white p-8 rounded-xl shadow-lg space-y-5 border border-gray-100">

    <!-- Person Name -->
    <div>
        <label for="PersonName"
               class="block text-sm font-semibold text-gray-700">
            Person Name
        </label>
        <input id="PersonName"
               name="PersonName"
               type="text"
               placeholder="Enter person name"
               class="mt-1 w-full rounded-lg border border-gray-300 bg-gray-50
                      px-3 py-2 shadow-sm
                      focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                      hover:border-blue-400
                      transition duration-200" />
    </div>

    <!-- Email -->
    <div>
        <label for="Email"
               class="block text-sm font-semibold text-gray-700">
            Email
        </label>
        <input id="Email"
               name="Email"
               type="email"
               placeholder="example@email.com"
               class="mt-1 w-full rounded-lg border border-gray-300 bg-gray-50
                      px-3 py-2 shadow-sm
                      focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                      hover:border-blue-400
                      transition duration-200" />
    </div>

    <!-- Date of Birth -->
    <div>
        <label for="DateOfBirth"
               class="block text-sm font-semibold text-gray-700">
            Date of Birth
        </label>
        <input id="DateOfBirth"
               name="DateOfBirth"
               type="date"
               class="mt-1 w-full rounded-lg border border-gray-300 bg-gray-50
                      px-3 py-2 shadow-sm
                      focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                      hover:border-blue-400
                      transition duration-200" />
    </div>

    <!-- Gender -->
    <div>
        <label class="block text-sm font-semibold text-gray-700 mb-2">
            Gender
        </label>

        <div class="flex gap-6">
            @* @foreach (var gender in Enum.GetValues(typeof(GenderType))) *@
            @foreach(GenderType gender in ViewBag.genderEnums)
            {
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="radio"
                           name="Gender"
                           value="@gender"
                           class="h-4 w-4 text-blue-600
                                      focus:ring-2 focus:ring-blue-500" />
                    <span class="text-gray-700">@gender</span>
                </label>
            }
        </div>
    </div>

    <!-- Country -->
    <div>
        <label for="CountryId"
               class="block text-sm font-semibold text-gray-700">
            Country
        </label>

        <select id="CountryId"
                name="CountryId"
                class="mt-1 w-full rounded-lg border border-gray-300 bg-gray-50
                       px-3 py-2 shadow-sm
                       focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                       hover:border-blue-400
                       transition duration-200">
            <option value="">Select country from here</option>

            @foreach (CountryResponse country in ViewBag.countries)
            {
                <option value="@country.Id">
                    @country.CountryName
                </option>
            }
        </select>
    </div>

    <!-- Address -->
    <div>
        <label for="address"
               class="block text-sm font-semibold text-gray-700">
            Address
        </label>
        <textarea id="address"
               name="Address"
               type="text"
               placeholder="Enter teh address here"
               class="mt-1 w-full rounded-lg border border-gray-300 bg-gray-50
                      px-3 py-2 shadow-sm
                      focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                      hover:border-blue-400
                      transition duration-200" ></textarea>

    </div>

    <!-- Submit -->
    <div class="pt-6">
        <button type="submit"
                class="w-full bg-blue-600 text-white font-semibold
                       px-4 py-2 rounded-lg shadow-md
                       hover:bg-blue-700 hover:shadow-lg
                       focus:ring-2 focus:ring-blue-500
                       transition duration-200">
            Create  
        </button>
    </div>
</form>
<script>
    // Convert server-side error list to JS array
    const errors = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.errorMessages));

    if (errors && errors.length > 0) {
        errors.forEach(err => {
            toastr.error(err, "Validation Error", {
                closeButton: true,
                progressBar: true,
                timeOut: 5000,
                positionClass: "toast-top-right"
            });
        });
    }
</script>

